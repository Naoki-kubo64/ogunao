# おぐなお - Puyo Puyo Game

モジュラーアーキテクチャで設計されたぷよぷよゲーム

## アーキテクチャ概要

### ディレクトリ構造
```
├── index.html          # メインHTML
├── style.css           # スタイルシート
├── images/             # ゲーム画像
│   ├── nao11.jpg
│   ├── nao12.jpg
│   ├── nao4.png
│   ├── raw.png
│   ├── ホラーなお.png
│   └── saginaoki.jpg
└── js/                 # JavaScriptモジュール
    ├── main.js         # エントリーポイント
    ├── game.js         # メインゲームクラス
    ├── config.js       # 設定定数
    ├── utils.js        # ユーティリティ関数
    ├── imageManager.js # 画像管理
    ├── gameBoard.js    # ゲームボード管理
    ├── piece.js        # ぷよピース管理
    ├── renderer.js     # 描画管理
    ├── effects.js      # エフェクト管理
    ├── gameLogic.js    # ゲームロジック
    └── debugManager.js # デバッグ機能
```

### モジュール設計

#### 1. **Config (config.js)**
- ゲーム設定の中央管理
- 定数定義とコンフィグレーション

#### 2. **Utils (utils.js)**
- 共通ユーティリティ関数
- DOM操作、数値計算、アニメーション

#### 3. **ImageManager (imageManager.js)**
- 画像リソースの非同期読み込み
- 画像状態管理とフォールバック

#### 4. **GameBoard (gameBoard.js)**
- ゲームボード状態管理
- 衝突判定、接続判定
- アニメーション状態管理

#### 5. **Piece (piece.js)**
- ぷよピースの管理
- 回転、移動、分離処理
- ピース生成器

#### 6. **Renderer (renderer.js)**
- Canvas描画の責務
- ぷよの視覚的表現
- エフェクト描画

#### 7. **EffectsManager (effects.js)**
- 爆発、連鎖、カットインエフェクト
- DOM要素の動的生成/削除

#### 8. **GameLogic (gameLogic.js)**
- ゲームルールの実装
- 連鎖処理、スコア計算
- 衝突判定ロジック

#### 9. **DebugManager (debugManager.js)**
- デバッグ機能の管理
- 連鎖パターン設置
- テスト用エフェクト

#### 10. **Game (game.js)**
- メインゲームループ
- 各モジュールの統合
- 状態管理

### 設計原則

1. **単一責任原則**: 各クラスは1つの責務のみ
2. **依存性注入**: コンストラクタで依存関係を明示
3. **ES6モジュール**: import/exportによる明確な依存関係
4. **設定の外部化**: config.jsによる設定管理
5. **イベント駆動**: 疎結合なコンポーネント間通信

### 特徴

- **保守性**: 機能ごとに分離された明確な責務
- **テスト容易性**: 各モジュールが独立してテスト可能
- **拡張性**: 新機能追加時の影響範囲を最小化
- **可読性**: 構造化されたコードと明確な命名規則

## 操作方法

- **A**: 左移動
- **D**: 右移動
- **S**: 下移動
- **Space**: 回転
- **Enter**: ゲーム開始/一時停止

## デバッグ機能

右側のデバッグパネルから以下が可能：
- 連鎖エフェクトのテスト
- 特定連鎖パターンの設置
- ボードクリア
- カットインエフェクトのテスト