<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¯¾æˆ¦BGMå¤‰æ›´ç¢ºèªãƒ†ã‚¹ãƒˆ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #2c3e50;
            color: white;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: #34495e;
            padding: 20px;
            border-radius: 10px;
        }
        .bgm-section {
            margin: 20px 0;
            padding: 20px;
            background: #3498db;
            border-radius: 8px;
        }
        .controls {
            margin: 15px 0;
        }
        button {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
            font-size: 16px;
        }
        button:hover {
            background: #c0392b;
        }
        button:disabled {
            background: #7f8c8d;
            cursor: not-allowed;
        }
        .status {
            background: #2c3e50;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            border-left: 4px solid #f39c12;
        }
        .audio-info {
            background: #27ae60;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .volume-control {
            margin: 15px 0;
        }
        .volume-control input {
            width: 200px;
            margin: 0 10px;
        }
    </style>
</head>
<body>
    <!-- æ–°ã—ã„å¯¾æˆ¦BGM -->
    <audio id="battle-bgm" preload="auto" loop>
        <source src="music/battleBGM.MP3" type="audio/mpeg">
    </audio>

    <!-- æ¯”è¼ƒç”¨ã®æ—§BGM -->
    <audio id="old-bgm" preload="auto" loop>
        <source src="music/ã·ã‚ˆã·ã‚ˆã£ã¨å§‹ã¾ã‚‹æ¯æ—¥.mp3" type="audio/mpeg">
    </audio>

    <div class="container">
        <h1>ğŸµ å¯¾æˆ¦BGMå¤‰æ›´ç¢ºèªãƒ†ã‚¹ãƒˆ</h1>
        <p>å¯¾æˆ¦ãƒ¢ãƒ¼ãƒ‰ã®BGMãŒ <code>battleBGM.MP3</code> ã«æ­£ã—ãå¤‰æ›´ã•ã‚Œã¦ã„ã‚‹ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚</p>

        <div class="bgm-section">
            <h3>ğŸ†• æ–°ã—ã„å¯¾æˆ¦BGM (battleBGM.MP3)</h3>
            <div class="audio-info">
                <div>ãƒ•ã‚¡ã‚¤ãƒ«: music/battleBGM.MP3</div>
                <div>ã‚µã‚¤ã‚º: ~5.3MB</div>
                <div>çŠ¶æ…‹: <span id="new-bgm-status">ç¢ºèªä¸­...</span></div>
            </div>
            
            <div class="controls">
                <button onclick="playNewBattleBgm()">ğŸ® æ–°BGMå†ç”Ÿ</button>
                <button onclick="stopNewBattleBgm()">â¹ï¸ åœæ­¢</button>
            </div>
            
            <div class="volume-control">
                <label>éŸ³é‡:</label>
                <input type="range" id="new-volume" min="0" max="100" value="50">
                <span id="new-volume-display">50%</span>
            </div>
        </div>

        <div class="bgm-section">
            <h3>ğŸ”„ æ¯”è¼ƒç”¨ æ—§BGM (ã·ã‚ˆã·ã‚ˆã£ã¨å§‹ã¾ã‚‹æ¯æ—¥.mp3)</h3>
            <div class="audio-info">
                <div>ãƒ•ã‚¡ã‚¤ãƒ«: music/ã·ã‚ˆã·ã‚ˆã£ã¨å§‹ã¾ã‚‹æ¯æ—¥.mp3</div>
                <div>çŠ¶æ…‹: <span id="old-bgm-status">ç¢ºèªä¸­...</span></div>
            </div>
            
            <div class="controls">
                <button onclick="playOldBattleBgm()">ğŸµ æ—§BGMå†ç”Ÿ</button>
                <button onclick="stopOldBattleBgm()">â¹ï¸ åœæ­¢</button>
            </div>
            
            <div class="volume-control">
                <label>éŸ³é‡:</label>
                <input type="range" id="old-volume" min="0" max="100" value="50">
                <span id="old-volume-display">50%</span>
            </div>
        </div>

        <div class="status" id="comparison-result">
            <h4>ğŸ“Š æ¯”è¼ƒçµæœ</h4>
            <div id="comparison-text">ä¸¡æ–¹ã®BGMã‚’å†ç”Ÿã—ã¦ã€éŸ³æ¥½ã®é•ã„ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</div>
        </div>

        <div class="bgm-section">
            <h3>ğŸ¯ å¯¾æˆ¦é–‹å§‹ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</h3>
            <p>å®Ÿéš›ã®å¯¾æˆ¦ãƒ¢ãƒ¼ãƒ‰é–‹å§‹æ™‚ã®å‹•ä½œã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆã—ã¾ã™ã€‚</p>
            
            <div class="controls">
                <button onclick="simulateBattleSequence()">âš”ï¸ å¯¾æˆ¦é–‹å§‹ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ</button>
                <button onclick="stopAllBgm()">ğŸ”‡ å…¨BGMåœæ­¢</button>
            </div>
            
            <div id="simulation-log" class="status">
                <div>ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã¾ã™...</div>
            </div>
        </div>
    </div>

    <script>
        let newBgm = document.getElementById('battle-bgm');
        let oldBgm = document.getElementById('old-bgm');
        let currentPlayingBgm = null;

        // éŸ³é‡åˆ¶å¾¡
        const newVolumeSlider = document.getElementById('new-volume');
        const oldVolumeSlider = document.getElementById('old-volume');
        const newVolumeDisplay = document.getElementById('new-volume-display');
        const oldVolumeDisplay = document.getElementById('old-volume-display');

        newVolumeSlider.addEventListener('input', (e) => {
            const volume = e.target.value;
            newVolumeDisplay.textContent = `${volume}%`;
            newBgm.volume = volume / 100;
        });

        oldVolumeSlider.addEventListener('input', (e) => {
            const volume = e.target.value;
            oldVolumeDisplay.textContent = `${volume}%`;
            oldBgm.volume = volume / 100;
        });

        // BGMã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª
        function checkBgmStatus() {
            // æ–°BGMã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
            if (newBgm.readyState >= 1) {
                document.getElementById('new-bgm-status').textContent = 'âœ… èª­ã¿è¾¼ã¿å®Œäº†ãƒ»å†ç”Ÿå¯èƒ½';
                document.getElementById('new-bgm-status').style.color = '#27ae60';
            } else {
                document.getElementById('new-bgm-status').textContent = 'â³ èª­ã¿è¾¼ã¿ä¸­...';
                document.getElementById('new-bgm-status').style.color = '#f39c12';
            }

            // æ—§BGMã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
            if (oldBgm.readyState >= 1) {
                document.getElementById('old-bgm-status').textContent = 'âœ… èª­ã¿è¾¼ã¿å®Œäº†ãƒ»å†ç”Ÿå¯èƒ½';
                document.getElementById('old-bgm-status').style.color = '#27ae60';
            } else {
                document.getElementById('old-bgm-status').textContent = 'â³ èª­ã¿è¾¼ã¿ä¸­...';
                document.getElementById('old-bgm-status').style.color = '#f39c12';
            }
        }

        // BGMå†ç”Ÿãƒ»åœæ­¢é–¢æ•°
        function playNewBattleBgm() {
            stopAllBgm();
            newBgm.currentTime = 0;
            newBgm.play().then(() => {
                currentPlayingBgm = newBgm;
                updateComparisonResult('æ–°ã—ã„å¯¾æˆ¦BGM (battleBGM.MP3) ãŒå†ç”Ÿä¸­ã§ã™ ğŸ®');
                console.log('âœ… æ–°BGMå†ç”Ÿé–‹å§‹');
            }).catch(e => {
                console.error('âŒ æ–°BGMå†ç”Ÿå¤±æ•—:', e);
                updateComparisonResult('âŒ æ–°BGMå†ç”Ÿã«å¤±æ•—ã—ã¾ã—ãŸ: ' + e.message);
            });
        }

        function stopNewBattleBgm() {
            newBgm.pause();
            newBgm.currentTime = 0;
            if (currentPlayingBgm === newBgm) {
                currentPlayingBgm = null;
                updateComparisonResult('æ–°BGMã‚’åœæ­¢ã—ã¾ã—ãŸ');
            }
        }

        function playOldBattleBgm() {
            stopAllBgm();
            oldBgm.currentTime = 0;
            oldBgm.play().then(() => {
                currentPlayingBgm = oldBgm;
                updateComparisonResult('æ¯”è¼ƒç”¨æ—§BGM (ã·ã‚ˆã·ã‚ˆã£ã¨å§‹ã¾ã‚‹æ¯æ—¥.mp3) ãŒå†ç”Ÿä¸­ã§ã™ ğŸµ');
                console.log('âœ… æ—§BGMå†ç”Ÿé–‹å§‹');
            }).catch(e => {
                console.error('âŒ æ—§BGMå†ç”Ÿå¤±æ•—:', e);
                updateComparisonResult('âŒ æ—§BGMå†ç”Ÿã«å¤±æ•—ã—ã¾ã—ãŸ: ' + e.message);
            });
        }

        function stopOldBattleBgm() {
            oldBgm.pause();
            oldBgm.currentTime = 0;
            if (currentPlayingBgm === oldBgm) {
                currentPlayingBgm = null;
                updateComparisonResult('æ—§BGMã‚’åœæ­¢ã—ã¾ã—ãŸ');
            }
        }

        function stopAllBgm() {
            newBgm.pause();
            newBgm.currentTime = 0;
            oldBgm.pause();
            oldBgm.currentTime = 0;
            currentPlayingBgm = null;
            updateComparisonResult('å…¨ã¦ã®BGMã‚’åœæ­¢ã—ã¾ã—ãŸ ğŸ”‡');
        }

        function updateComparisonResult(message) {
            document.getElementById('comparison-text').textContent = message;
        }

        // å¯¾æˆ¦é–‹å§‹ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
        function simulateBattleSequence() {
            const logDiv = document.getElementById('simulation-log');
            logDiv.innerHTML = '<div>ğŸ® å¯¾æˆ¦é–‹å§‹ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³é–‹å§‹...</div>';
            
            // 1. å…¨BGMåœæ­¢
            stopAllBgm();
            setTimeout(() => {
                logDiv.innerHTML += '<div>ğŸ”‡ æ—¢å­˜BGMã‚’åœæ­¢</div>';
                
                // 2. å¯¾æˆ¦BGMé–‹å§‹
                setTimeout(() => {
                    logDiv.innerHTML += '<div>ğŸµ å¯¾æˆ¦BGM (battleBGM.MP3) é–‹å§‹...</div>';
                    playNewBattleBgm();
                    
                    setTimeout(() => {
                        logDiv.innerHTML += '<div>âœ… å¯¾æˆ¦BGMå†ç”Ÿé–‹å§‹å®Œäº†</div>';
                        logDiv.innerHTML += '<div style="color: #27ae60; font-weight: bold;">ğŸ¯ å¯¾æˆ¦ãƒ¢ãƒ¼ãƒ‰BGMå¤‰æ›´æˆåŠŸï¼</div>';
                    }, 1000);
                }, 500);
            }, 200);
        }

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', () => {
            newBgm.volume = 0.5;
            oldBgm.volume = 0.5;
            
            // BGMãŒèª­ã¿è¾¼ã¾ã‚ŒãŸæ™‚ã®ã‚¤ãƒ™ãƒ³ãƒˆ
            newBgm.addEventListener('canplay', checkBgmStatus);
            oldBgm.addEventListener('canplay', checkBgmStatus);
            
            // å®šæœŸçš„ã«ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒã‚§ãƒƒã‚¯
            setInterval(checkBgmStatus, 1000);
            
            // åˆå›ãƒã‚§ãƒƒã‚¯
            setTimeout(checkBgmStatus, 500);
            
            console.log('ğŸš€ å¯¾æˆ¦BGMå¤‰æ›´ç¢ºèªãƒ†ã‚¹ãƒˆåˆæœŸåŒ–å®Œäº†');
        });
    </script>
</body>
</html>